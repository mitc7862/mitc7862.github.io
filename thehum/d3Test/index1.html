<!DOCTYPE html>
<meta charset="utf-8">

<head>
  <title>Force layout (with links)</title>
</head>

<style>
  circle {
    /* fill: cadetblue; */
  }

  text {
    text-anchor: left;
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    fill: #666;
    font-size: 12px;
  }

  body {
    margin: 0;
    padding: 0;
  }

  svg {
    width: 100vw;
    height: 100vh;
  }
</style>

<body>
  <div id="content">
    <svg>
      <g class="links"></g>
      <g class="nodes"></g>
    </svg>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
  <script src="humBigramNetwork.js"></script>

  <script>
    var width = window.innerWidth
    var height = window.innerHeight
    var svg = d3.select('svg')
      .attr('width', width)
      .attr('height', height)

    var simulation = d3.forceSimulation()
      .force('charge', d3.forceManyBody().strength(-20))
      .force('center', d3.forceCenter(width / 2, height / 2))


    var nodeElements = svg.append('g')
      .selectAll('circle')
      .data(nodes)
      .enter().append('circle')
      .attr('r', 10)
      .attr('fill', "#000")

    var textElements = svg.append('g')
      .selectAll('text')
      .data(nodes)
      .enter().append('text')
      .text(node => node.id)
      .attr('font-size', 12)
      .attr('dx', 15)
      .attr('dy', 4)

    simulation.nodes(nodes).on("tick", () => {
      nodeElements.attr("cx", node => node.x)
        .attr("cy", node => node.y)
      textElements.attr("x", node => node.x)
        .attr("y", node => node.y)
    })

    simulation.force('link', d3.forceLink()
      .id(link => link.id)
      .strength(link => link.strength))

    var linkElements = svg.append('g')
      .selectAll('line')
      .data(links)
      .enter().append('line')
      .attr('stroke-width', 1)
      .attr('stroke', "#000")

    linkElements
      .attr('x1', link => link.source.x)
      .attr('y1', link => link.source.y)
      .attr('x2', link => link.target.x)
      .attr('y2', link => link.target.y)

   simulation.force('link').link(links)


  </script>
</body>

</html>